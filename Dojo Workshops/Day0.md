# INstall & Configure ELK

https://www.elastic.co/start



## Install Elasticsearch
    
- Install Elasticsearch \
  https://www.elastic.co/guide/en/elasticsearch/reference/8.1/rpm.html

- Update the config file


    ```
    cluster.name: <clustername>
    node.name: <hostname>

    network.host: 0.0.0.0

    discovery.type: single-node
    ```

- comment below line on config file
    ```
    cluster.initial_master_nodes
    ```

- start the service
- update firewall to allow 9200


```
[root@test-01 yum.repos.d]# /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic
This tool will reset the password of the [elastic] user to an autogenerated value.
The password will be printed in the console.
Please confirm that you would like to continue [y/N]y


Password for the [elastic] user successfully reset.
New value: LKFOmCpCd4MgAZHEXCVa
```

## Install Kibana
- Install Kibana \
https://www.elastic.co/guide/en/kibana/8.1/rpm.html#rpm-repo

- Create enrollment token

```
/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana


[root@test-01 ~]# /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana
eyJ2ZXIiOiI4LjEuMiIsImFkciI6WyIxMC4wLjAuMTQwOjkyMDAiXSwiZmdyIjoiYzIxNzU4Y2Y1NDY0NTBhYmVlNDEwNWMyNGY5ZmM5ZDNkOTVkYzdiZDJmNzE1NDMxZTU2YzNhM2ZkNDRmNWMwMCIsImtleSI6IlRlcTJYNEFCZ1NIcVBPWDlpbVBnOkc0b3kwV2Z0Ul9pNmpabWxFbEJYc0EifQ==
[root@test-01 ~]#


```

- configure & Start Kibana

```
# update the port & ip
vi /etc/kibana/kibana.yml

server.port: 5601
server.host: "0.0.0.0"

# start and check the status

systemctl start kibana.service

journalctl -u kibana.service

```

- Either use the console to configure Kibana or the commandline

- Using Console
  -  Access Kibana URL

  http://IP:5601/?code=653959

  - Enter the enrollment token & veification code

  [root@test-01 ~]# /usr/share/kibana/bin/kibana-verification-code
  Your verification code is:  897 862
  [root@test-01 ~]#

- Using Commandline

  /usr/share/kibana/bin/kibana-setup

- use the elastic user and password